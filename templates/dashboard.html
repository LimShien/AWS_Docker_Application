{% extends "template/header.html" %}
{% block title %} Login Page{% endblock %}
{% block content %} 

<link rel="stylesheet" href="{{ url_for('static', filename='style/dashboardstyle.css') }}">

<body>

<div class="container-fluid h-100">
<div class="row content h-100">

  <!--navbar-->
  <div class="col-sm-3 sidenav hidden-xs">
    <div id="greetings">
      <div><img id="avatar" src="{{ url_for('static', filename='images/avatar.jpg') }}" alt="Avatar" class="avatar"></div></br>
      <div>
        <p class="greet">Welcome, </p>
        <p class="greet"><strong> {{ session['username'] }}    </strong></p>
      </div>
    </div>

    <hr>
    <ul class="nav nav-pills nav-stacked flex-column">
      <li class="active"><a href="#">Dashboard Overview</a></li>
      <li><a href="#profile">Profile</a></li>
      <li><a href="#scoreboard">Scoreboard</a></li>
      <li><a href="#lab">Completed Lab</a></li>
      <li><a href=" {{ url_for('home')}}"> <i class="fas fa-sign-out-alt" style="margin-right: 1em;"></i> Back Home</a></li>
      {% if session['username']=='admin' %}

      <li><a href=" {{ url_for('admin_dashboard')}}"> <i class="fas fa-exchange-alt" style="margin-right: 1em;"></i> Admin Dashboard</a></li>

      {% endif %}
    </ul><br>

    
  </div>

  <!-- end navbar-->
  <br>

  <!--Three Box-->
  <div class="col"  id="main">
    <div class="col-md-15">


      <div class="well-title">
        <h2 style="text-transform: capitalize;"><i class="far fa-chart-bar"> </i> {{ session['username']}}  Dashboard</h2>
      </div>

      <div class="row"> <!--scoreboard/lab/view box-->
        <a href="#scoreboard">

        <div class="col"> <!--scoreboard-->
      
          <div class="well-score">

            <div class="left">
              <h2><i class="fab fa-deezer"></i></h2>
              </br>
              <h4>Scoreboard</h4>
              </br>
            </div>
            <div class="right">
              <h1> {{ user.score }} </h1>
            </div>

          </div>
        </a>
        </div>

        <div class="col"> <!--lab-->
          <a href="#lab">
          <div class="well-lab">

            <div class="left">
              <h2><i class="far fa-check-square"></i></h2>
              </br>
              <h4>Completed Lab</h4>
              </br>
            </div>
            <div class="right">
              <h1> 1 </h1>
            </div>
            
          </div>  
          </a>
        </div>
        <div class="col"> <!--Profile-->
          <a href="#profile">
          <div class="well-view">

            <div class="left">
              <h2><i class="fas fa-user-edit"></i></h2>
              </br>
              <h4>Profile</h4>
              </br>
            </div>
            <div class="right">
              <h1><i class="fas fa-mouse-pointer"></i> </h1>
            </div>
            
          </div>  
          </a>
        </div>
      </div>


      <div class="row"> <!--score board-->
        <div class="col-sm-9">
          <div id="scoreboard" class="scoreboard">

         
          <h4><i class="fab fa-deezer"></i> Scoreboard</h4>
            <div class="progress">
              
              <div class="progress-bar progress-bar-striped bg-info  progress-bar-animated" id="progress-bar" role="progressbar" style="width: 80%"  aria-valuemin="0" aria-valuemax="100"></div>
            </div>
         </div> <!-- end scoreboard-->
        </div>

        <div class="col-sm">
          <div class="scoreboard">
          <h4>Next Level</h4>
          <div class="next-lev">
            <h4>2 points to level <span id="level"></span></h4>
          </div>

         </div> <!-- end scoreboard-->
        </div>

      </div> <!-- end scoreboard div-->
            
      <div class="col"> <!--Recently completed lab-->
          <div id="lab" class="lab">

          <h4><i class="far fa-check-square"></i> Recently completed lab</h4>
            <div class="row  justify-content-between">
        
            {% for i in range (0,6) %}
              
              <div class="col-3" id="each-task">
                  <a class="each-link" href="#" >
                  <p class="stack_bot">No Lab completed Yet.</p>
                  <i class="stack_bot"style="font-size: 3em;" class="fas fa-laptop-code"></i>
                  </a>
                </div>
         
            {% endfor%}

        </div>

       </div> <!-- end Recent lab-->
      </div>

      <div class="row"> <!--Profile-->
        
        <div class="col-sm-7">
          <div class="profile" id="profile">
          <h4><i class="fas fa-edit"></i> View/Edit Profile</h4>
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text">Username: </span>
            </div>
            <input type="text" class="form-control" readonly="true" value="{{ user.username }}" style="background-color:white ;">
          </div>

          <div class="input-group mb-7">
            <div class="input-group-prepend">
              <span class="input-group-text">FirstName:</span>
            </div>
            <input type="text" class="form-control" readonly="true" value="First name" style="background-color:white ;">
          </div><br>

          <div class="input-group mb-7">
            <div class="input-group-prepend">
              <span class="input-group-text">LastName:</span>
            </div>
            <input type="text" class="form-control" readonly="true" value="Last name" style="background-color:white ;">
          </div><br>

          <div class="input-group mb-7">
            <div class="input-group-prepend">
              <span class="input-group-text">Email : </span>
            </div>
            <input type="text" class="form-control" readonly="true" value="ryan@mydomain.com" style="background-color:white ;">
          </div><br>

          <div class="input-group mb-7">
            <div class="input-group-prepend">
              <span class="input-group-text">Institution : </span>
            </div>
            <input type="text" class="form-control" readonly="true" value="Technological University Dublin" style="background-color:white ;">
          </div> <br>

          <div class="input-group mb-7">
            <div class="input-group-prepend">
              <span class="input-group-text">Website : </span>
            </div>

            <input type="text" class="form-control" readonly="true" value="https://github.com" style="background-color:white ;">
          </div>

         </div> <!-- end profile-->
        </div>

      </div> <!-- end Profile div-->      

</div><!--end row-->
</div><!--end fluid-->

<script>

var score_array = [];
var z = 10;
for (var i = 0; i < 15 ; i+=1){  //initialize the default array for score length
  if(i == 0){
    score_array.push(z);
  }
  else{
    score_array.push(z*=2);
  }
}

function check_score(x){
  var counter = 0;
  for ( i = 0; i < score_array.length ; i ++){
    if (x > score_array[i]){
      counter += 1;
      //console.log('x' + x + 'sco: ' + score_array[i] + 'counter' + counter);
      continue;
    }else if (i < score_array[i]){
    xx = ((x-score_array[i-1]) / (score_array[i]-score_array[i-1])) * 100 ;
    console.log(xx);
    $("#progress-bar").attr("aria-valuenow", xx) //updates the aria value 
    break;
    }
  }
  
  console.log('counter' + counter);
  document.getElementById("level").innerHTML = counter +1;
}

check_score(90);



</script>

</body>
{% endblock %}